---
import Card from "@layouts/Card.astro";
import Vote from "@components/Vote.astro";
import Comments from "@components/Comments.astro";

interface Props {
  title: string | null;
  description: string;
  id: number;
  userName?: string;
  userId?: number;
  forumName?: string;
  forumId?: number;
  upvotes: number;
  downvotes: number;
  comments?: number;
}

const {
  title,
  description,
  id,
  userName,
  userId,
  forumName,
  forumId,
  upvotes,
  downvotes,
  comments,
} = Astro.props;
---

<Card title={title ?? undefined} url={`/posts/${id}`}>
  <span slot="author">
    {
      forumName ? (
        <a href={`/forums/${forumId}`}>{forumName}</a>
      ) : (
        userName && <a href={`/users/${userId}`}>{userName}</a>
      )
    }
  </span>
  {description}
  <Vote postId={id} score={1} amount={upvotes} slot="footer" />
  <Vote postId={id} score={-1} amount={downvotes} slot="footer" />
  {comments && <Comments postId={id} amount={comments} slot="footer" />}
</Card>
