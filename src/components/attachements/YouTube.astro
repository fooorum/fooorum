---
interface Props {
  url: string;
}
const { url } = Astro.props;

const embedId = getYouTubeId(url);
const embedUrl = `https://www.youtube.com/embed/${embedId}`;

export function getYouTubeId(href: URL | string) {
  const url = new URL(href);
  const hostname = url.hostname.replace("www.", "");
  if (hostname === "youtube.com") {
    return url.searchParams.get("v");
  } else if (hostname === "youtu.be") {
    return url.pathname;
  }
}
---

<iframe src={embedUrl}> </iframe>

<style>
  iframe {
    position: relative;
    z-index: 1;

    width: 100%;
    aspect-ratio: 16 / 9;
    border: none;
    border-radius: 1em;
  }
</style>
