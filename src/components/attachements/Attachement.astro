---
import Image from "@components/attachements/Image.astro";
import Audio from "@components/attachements/Audio.astro";
import Video from "@components/attachements/Video.astro";
import Embed from "@components/attachements/Embed.astro";
import blobTypes from "@lib/caches/BlobTypes";

interface Props {
  url: string;
}
const { url } = Astro.props;

const components = {
  image: Image,
  audio: Audio,
  video: Video,
};

const type = (await blobTypes.fetch(url)) as keyof typeof components;
const Component = type in components ? components[type] : Embed;
---

<Component url={url} />
