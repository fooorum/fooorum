---
import Image from "@components/attachements/Image.astro";
import Audio from "@components/attachements/Audio.astro";
import Video from "@components/attachements/Video.astro";
import Generic from "@components/attachements/Generic.astro";

interface Props {
  url: string;
}
const { url } = Astro.props;

const components = {
  image: Image,
  audio: Audio,
  video: Video,
};

const response = await fetch(url);
const blob = await response.blob();
const type = blob.type.split("/")[0] as keyof typeof components;

const Component = type in components ? components[type] : Generic;
---

<Component url={url} />
