---
import Feed from "@components/Feed.astro";
import Layout from "@layouts/Layout.astro";
import { db, User } from "astro:db";

export async function getStaticPaths() {
    const users = await db.select().from(User);
    return users.map((user) => ({
        params: { user: user.id },
        props: user,
    }));
}
type Props = typeof User;

const user = Astro.props;
---

<Layout title={user.name}>
    <div slot="header" class="header">
        <h2>{user.name}</h2>
        {user.description}
    </div>
    <Feed user={user.id} />
</Layout>

<style>
    .header {
        display: flex;
        gap: 1em;
        align-items: center;
    }
</style>
